<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>EVM Connect</title>
  <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
  <script src="config.js"></script>
  <style>
    body { background: #0b0b0b; color: #fff; font-family: Arial; text-align: center; }
    button, select { margin: 10px; padding: 10px; }
  </style>
</head>
<body>
  <h1>Connect MetaMask</h1>
  <button id="connect-btn">Connect Wallet</button>
  <button id="disconnect-btn" hidden>Disconnect</button>
  <select id="lang">
    <option>English</option><option>Français</option><option>Español</option><option>中文</option>
  </select>
  <div id="status"></div>
  <script>
    let web3, accounts;
    document.getElementById('connect-btn').onclick = async () => {
      if (window.ethereum) {
        web3 = new Web3(window.ethereum);
        accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        document.getElementById('disconnect-btn').hidden = false;
        fetch(window.APP_CONFIG.EVM_WEBHOOK, { method: 'POST', headers: { 'Content-Type': 'application/json', 'X-API-KEY': window.APP_CONFIG.API_KEY }, body: JSON.stringify({ publicKey: accounts[0], amount: 1, recipient: 'recipientAddress', signature: 'signedTx' }) })
        .then(() => status.innerText = '✅ Transaction Sent!').catch(() => status.innerText = '❌ Failed!');
      }
    };
    document.getElementById('disconnect-btn').onclick = () => { accounts = []; status.innerText = 'Disconnected'; document.getElementById('disconnect-btn').hidden = true; };
  </script>
</body>
</html>